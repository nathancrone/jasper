!function(){"use strict";angular.module("app",["ngAria","mm.foundation","app.my","app.out","app.in"]).config(["$routeProvider",function(e){e.otherwise({redirectTo:"/my"})}]).controller("MainCtrl",["$scope","$location","$routeParams","app.data",function(e,r,t,n){e.currentTab=r.url().slice(1).split("/")[0],e.tabSelected=function(r){return e.currentTab==r},e.tabNavigate=function(e){r.url("/"+e)},e.$on("$locationChangeSuccess",function(t){e.currentTab=r.url().slice(1).split("/")[0]})}])}(),function(){"use strict";angular.module("app").factory("app.data",["$http",function(e){var r=$("#ViewTerritory").attr("href");return{territoryOutByUser:function(){return e.get($("#JSON_TerritoryOutByUser").attr("href")).then(function(e){return e.data})},territoryOut:function(){return e.get($("#JSON_TerritoryOut").attr("href")).then(function(e){return e.data})},territoryIn:function(){return e.get($("#JSON_TerritoryIn").attr("href")).then(function(e){return e.data})},territoryInOldest:function(){return e.get($("#JSON_TerritoryInOldest").attr("href")).then(function(e){return e.data})},userAll:function(){return e.get($("#JSON_UserAll").attr("href")).then(function(e){return e.data})},checkOut:function(r){var t={method:"POST",url:$("#CheckOut").attr("href"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(r)};return e(t).then(function(e){return e.data})},checkOutUser:function(r){var t={method:"POST",url:$("#CheckOutUser").attr("href"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(r)};return e(t).then(function(e){return e.data})},checkIn:function(r){var t={method:"POST",url:$("#CheckIn").attr("href"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(r)};return e(t).then(function(e){return e.data})},reWork:function(r){var t={method:"POST",url:$("#Rework").attr("href"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(r)};return e(t).then(function(e){return e.data})},viewLink:r}}])}(),function(){"use strict";angular.module("app.in",["ngRoute"]).config(["$routeProvider",function(e){e.when("/in",{templateUrl:"views/index-template-in.html",controller:"InCtrl"})}]).controller("InCtrl",["$scope","$location","$route","$routeParams","$modal","app.data",function(e,r,t,n,o,i){e.viewLink=i.viewLink,e.sortExpression=["CheckInDate",["Territory.TerritoryCode"]],e.selectedTerritory=null,e.sortBy=function(r){e.sortExpression=r},i.territoryIn().then(function(r){e.territories=r},function(){}),e.checkOut=function(r,n,c,s){e.selectedTerritory=r;var a={templateUrl:"views/index-template-incheckout.html",resolve:{selectedTerritory:function(){return e.selectedTerritory}},controller:["$scope","$modalInstance","selectedTerritory",function(e,r,t){e.users=[],e.selectedTerritory=t,e.data={selectedUser:null,CheckOutDate:null},i.userAll().then(function(r){e.users=r},function(){}),e.reposition=function(){r.reposition()},e.ok=function(){r.close({selectedTerritory:e.selectedTerritory,selectedUser:e.data.selectedUser,CheckOutDate:e.data.CheckOutDate})},e.cancel=function(){r.dismiss("cancel")}}]};angular.isDefined(s)&&(a.closeOnClick=s),angular.isDefined(n)&&(a.size=n),angular.isDefined(c)&&(a.backdrop=c),o.open(a).result.then(function(r){i.checkOut({TerritoryId:r.selectedTerritory.TerritoryId,UserId:r.selectedUser.Id,CheckOutDate:r.CheckOutDate}).then(function(r){e.Response=r,e.showSuccess=!r.Error,e.showError=r.Error,e.alertMessage=r.Message,t.reload()},function(r){e.Response=r,e.showSuccess=!1,e.showError=!0,e.alertMessage="There was an error checking out the territory."})},function(){})},e.closeAlert=function(){e.showSuccess=!1,e.showError=!1,e.alertMessage=""}}])}(),function(){"use strict";angular.module("app.my",["ngRoute"]).config(["$routeProvider",function(e){e.when("/my",{templateUrl:"views/index-template-my.html",controller:"MyCtrl"})}]).controller("MyCtrl",["$scope","$location","$route","$routeParams","$modal","app.data",function(e,r,t,n,o,i){e.viewLink=i.viewLink,e.sortExpression=["CheckOutDate",["Territory.TerritoryCode"]],e.selectedTerritory=null,e.sortBy=function(r){e.sortExpression=r},i.territoryOutByUser().then(function(r){e.ledgerEntries=r},function(){}),e.checkIn=function(r,n,c,s){e.selectedTerritory=r;var a={templateUrl:"views/index-template-mycheckin.html",resolve:{selectedTerritory:function(){return e.selectedTerritory}},controller:["$scope","$modalInstance","selectedTerritory",function(e,r,t){e.selectedTerritory=t,e.reposition=function(){r.reposition()},e.ok=function(){r.close({selectedTerritory:e.selectedTerritory,CheckInDate:null})},e.cancel=function(){r.dismiss("cancel")}}]};angular.isDefined(s)&&(a.closeOnClick=s),angular.isDefined(n)&&(a.size=n),angular.isDefined(c)&&(a.backdrop=c),o.open(a).result.then(function(r){i.checkIn({TerritoryId:r.selectedTerritory.TerritoryId,CheckInDate:r.CheckInDate}).then(function(r){e.Response=r,e.showSuccess=!r.Error,e.showError=r.Error,e.alertMessage=r.Message,t.reload()},function(r){e.Response=r,e.showSuccess=!1,e.showError=!0,e.alertMessage="There was an error checking in the territory."})},function(){})},e.reWork=function(r,n,c,s){e.selectedTerritory=r;var a={templateUrl:"views/index-template-myrework.html",resolve:{selectedTerritory:function(){return e.selectedTerritory}},controller:["$scope","$modalInstance","selectedTerritory",function(e,r,t){e.selectedTerritory=t,e.reposition=function(){r.reposition()},e.ok=function(){r.close({selectedTerritory:e.selectedTerritory})},e.cancel=function(){r.dismiss("cancel")}}]};angular.isDefined(s)&&(a.closeOnClick=s),angular.isDefined(n)&&(a.size=n),angular.isDefined(c)&&(a.backdrop=c),o.open(a).result.then(function(r){i.reWork({TerritoryId:r.selectedTerritory.TerritoryId}).then(function(r){e.Response=r,e.showSuccess=!r.Error,e.showError=r.Error,e.alertMessage=r.Message,t.reload()},function(r){e.Response=r,e.showSuccess=!1,e.showError=!0,e.alertMessage="There was an error attempting to rework the territory."})},function(){})},e.checkOut=function(r,n,c){var s={templateUrl:"views/index-template-mycheckout.html",resolve:{},controller:["$scope","$modalInstance",function(e,r){e.viewLink=i.viewLink,e.sortExpression=["CheckInDate",["Territory.TerritoryCode"]],e.selectedTerritory=null,e.sortBy=function(r){e.sortExpression=r},e.selectTerritory=function(r){e.selectedTerritory=r},i.territoryInOldest().then(function(r){e.territories=r},function(){}),e.reposition=function(){r.reposition()},e.ok=function(){r.close({selectedTerritory:e.selectedTerritory,CheckOutDate:null})},e.cancel=function(){r.dismiss("cancel")}}]};angular.isDefined(c)&&(s.closeOnClick=c),angular.isDefined(r)&&(s.size=r),angular.isDefined(n)&&(s.backdrop=n),o.open(s).result.then(function(r){i.checkOutUser({TerritoryId:r.selectedTerritory.TerritoryId,CheckOutDate:r.CheckOutDate}).then(function(r){e.Response=r,e.showSuccess=!r.Error,e.showError=r.Error,e.alertMessage=r.Message,t.reload()},function(r){e.Response=r,e.showSuccess=!1,e.showError=!0,e.alertMessage="There was an error checking out the territory."})},function(){})}}])}(),function(){"use strict";angular.module("app.out",["ngRoute"]).config(["$routeProvider",function(e){e.when("/out",{templateUrl:"views/index-template-out.html",controller:"OutCtrl"})}]).controller("OutCtrl",["$scope","$location","$route","$routeParams","$modal","app.data",function(e,r,t,n,o,i){e.viewLink=i.viewLink,e.sortExpression=["CheckOutDate",["Territory.TerritoryCode"]],e.selectedTerritory=null,e.sortBy=function(r){e.sortExpression=r},i.territoryOut().then(function(r){e.territories=r},function(){}),e.checkIn=function(r,n,c,s){e.selectedTerritory=r;var a={templateUrl:"views/index-template-outcheckin.html",resolve:{selectedTerritory:function(){return e.selectedTerritory}},controller:["$scope","$modalInstance","selectedTerritory",function(e,r,t){e.selectedTerritory=t,e.data={CheckInDate:null},e.reposition=function(){r.reposition()},e.ok=function(){r.close({selectedTerritory:e.selectedTerritory,CheckInDate:e.data.CheckInDate})},e.cancel=function(){r.dismiss("cancel")}}]};angular.isDefined(s)&&(a.closeOnClick=s),angular.isDefined(n)&&(a.size=n),angular.isDefined(c)&&(a.backdrop=c),o.open(a).result.then(function(r){i.checkIn({TerritoryId:r.selectedTerritory.TerritoryId,CheckInDate:r.CheckInDate}).then(function(r){e.Response=r,e.showSuccess=!r.Error,e.showError=r.Error,e.alertMessage=r.Message,t.reload()},function(r){e.Response=r,e.showSuccess=!1,e.showError=!0,e.alertMessage="There was an error checking in the territory."})},function(){})}}])}();